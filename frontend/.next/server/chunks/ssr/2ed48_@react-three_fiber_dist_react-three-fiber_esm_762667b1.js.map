{"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@react-three+fiber@9.4.0_@t_a5652e49dcd63c171bfdee5bc3b739ce/node_modules/@react-three/fiber/dist/react-three-fiber.esm.js","../src/index.ts"],"sourcesContent":["import { e as extend, u as useBridge, a as useMutableCallback, b as useIsomorphicLayoutEffect, c as createRoot, i as isRef, E as ErrorBoundary, B as Block, d as unmountComponentAtNode, f as createPointerEvents } from './events-f8cd670d.esm.js';\nexport { t as ReactThreeFiber, _ as _roots, x as act, k as addAfterEffect, j as addEffect, l as addTail, n as advance, s as applyProps, y as buildGraph, q as context, g as createEvents, o as createPortal, c as createRoot, w as dispose, f as events, e as extend, h as flushGlobalEffects, p as flushSync, v as getRootState, m as invalidate, r as reconciler, d as unmountComponentAtNode, D as useFrame, F as useGraph, z as useInstanceHandle, G as useLoader, A as useStore, C as useThree } from './events-f8cd670d.esm.js';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport useMeasure from 'react-use-measure';\nimport { FiberProvider } from 'its-fine';\nimport { jsx } from 'react/jsx-runtime';\nimport 'react-reconciler/constants';\nimport 'zustand/traditional';\nimport 'suspend-react';\nimport 'react-reconciler';\nimport 'scheduler';\n\nfunction CanvasImpl({\n  ref,\n  children,\n  fallback,\n  resize,\n  style,\n  gl,\n  events = createPointerEvents,\n  eventSource,\n  eventPrefix,\n  shadows,\n  linear,\n  flat,\n  legacy,\n  orthographic,\n  frameloop,\n  dpr,\n  performance,\n  raycaster,\n  camera,\n  scene,\n  onPointerMissed,\n  onCreated,\n  ...props\n}) {\n  // Create a known catalogue of Threejs-native elements\n  // This will include the entire THREE namespace by default, users can extend\n  // their own elements by using the createRoot API instead\n  React.useMemo(() => extend(THREE), []);\n  const Bridge = useBridge();\n  const [containerRef, containerRect] = useMeasure({\n    scroll: true,\n    debounce: {\n      scroll: 50,\n      resize: 0\n    },\n    ...resize\n  });\n  const canvasRef = React.useRef(null);\n  const divRef = React.useRef(null);\n  React.useImperativeHandle(ref, () => canvasRef.current);\n  const handlePointerMissed = useMutableCallback(onPointerMissed);\n  const [block, setBlock] = React.useState(false);\n  const [error, setError] = React.useState(false);\n\n  // Suspend this component if block is a promise (2nd run)\n  if (block) throw block;\n  // Throw exception outwards if anything within canvas throws\n  if (error) throw error;\n  const root = React.useRef(null);\n  useIsomorphicLayoutEffect(() => {\n    const canvas = canvasRef.current;\n    if (containerRect.width > 0 && containerRect.height > 0 && canvas) {\n      if (!root.current) root.current = createRoot(canvas);\n      async function run() {\n        await root.current.configure({\n          gl,\n          scene,\n          events,\n          shadows,\n          linear,\n          flat,\n          legacy,\n          orthographic,\n          frameloop,\n          dpr,\n          performance,\n          raycaster,\n          camera,\n          size: containerRect,\n          // Pass mutable reference to onPointerMissed so it's free to update\n          onPointerMissed: (...args) => handlePointerMissed.current == null ? void 0 : handlePointerMissed.current(...args),\n          onCreated: state => {\n            // Connect to event source\n            state.events.connect == null ? void 0 : state.events.connect(eventSource ? isRef(eventSource) ? eventSource.current : eventSource : divRef.current);\n            // Set up compute function\n            if (eventPrefix) {\n              state.setEvents({\n                compute: (event, state) => {\n                  const x = event[eventPrefix + 'X'];\n                  const y = event[eventPrefix + 'Y'];\n                  state.pointer.set(x / state.size.width * 2 - 1, -(y / state.size.height) * 2 + 1);\n                  state.raycaster.setFromCamera(state.pointer, state.camera);\n                }\n              });\n            }\n            // Call onCreated callback\n            onCreated == null ? void 0 : onCreated(state);\n          }\n        });\n        root.current.render( /*#__PURE__*/jsx(Bridge, {\n          children: /*#__PURE__*/jsx(ErrorBoundary, {\n            set: setError,\n            children: /*#__PURE__*/jsx(React.Suspense, {\n              fallback: /*#__PURE__*/jsx(Block, {\n                set: setBlock\n              }),\n              children: children != null ? children : null\n            })\n          })\n        }));\n      }\n      run();\n    }\n  });\n  React.useEffect(() => {\n    const canvas = canvasRef.current;\n    if (canvas) return () => unmountComponentAtNode(canvas);\n  }, []);\n\n  // When the event source is not this div, we need to set pointer-events to none\n  // Or else the canvas will block events from reaching the event source\n  const pointerEvents = eventSource ? 'none' : 'auto';\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: divRef,\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      pointerEvents,\n      ...style\n    },\n    ...props,\n    children: /*#__PURE__*/jsx(\"div\", {\n      ref: containerRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      },\n      children: /*#__PURE__*/jsx(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: 'block'\n        },\n        children: fallback\n      })\n    })\n  });\n}\n\n/**\r\n * A DOM canvas which accepts threejs elements as children.\r\n * @see https://docs.pmnd.rs/react-three-fiber/api/canvas\r\n */\nfunction Canvas(props) {\n  return /*#__PURE__*/jsx(FiberProvider, {\n    children: /*#__PURE__*/jsx(CanvasImpl, {\n      ...props\n    })\n  });\n}\n\nexport { Canvas };\n",null],"names":["createDebounce","callback","ms","timeoutId","args","useMeasure","debounce","scroll","polyfill","offsetSize","ResizeObserver","bounds","set","useState","state","useRef","scrollDebounce","resizeDebounce","mounted","useEffect","forceRefresh","resizeChange","scrollChange","useMemo","left","top","width","height","bottom","right","x","y","size","areBoundsEqual","removeListeners","element","addListeners","scrollContainer","ref","node","findScrollContainers","useOnWindowScroll","useOnWindowResize","onWindowResize","cb","onScroll","enabled","result","overflow","overflowX","overflowY","prop","keys","a","b","key"],"mappings":"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","ignoreList":[0]}