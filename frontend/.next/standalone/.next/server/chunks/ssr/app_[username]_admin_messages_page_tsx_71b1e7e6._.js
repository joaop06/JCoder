module.exports=[43800,a=>{"use strict";a.s(["default",()=>m],43800);var b=a.i(11755),c=a.i(4188),d=a.i(783),e=a.i(38679),f=a.i(30718),g=a.i(507),h=a.i(47742),i=a.i(34703),j=a.i(80150),k=a.i(61015);let l={async findAllConversations(a){try{let b=await k.ApiService.get(`/${a}/messages/conversations`);return Array.isArray(b.data)?b.data:b.data?.data||[]}catch(a){throw a}},async findMessagesByConversation(a,b){try{let c=await k.ApiService.get(`/${a}/messages/conversations/${b}/messages`);return Array.isArray(c.data)?c.data:c.data?.data||[]}catch(a){throw a}},async markMessagesAsRead(a,b,c){try{await k.ApiService.post(`/${a}/messages/conversations/${b}/mark-read`,c)}catch(a){throw a}},async findById(a,b){try{let c=await k.ApiService.get(`/${a}/messages/${b}`);return c.data?.data||c.data}catch(a){throw a}},async delete(a,b){try{await k.ApiService.delete(`/${a}/messages/${b}`)}catch(a){throw a}}};function m(){let a=(0,f.useRouter)(),k=(0,f.useParams)(),m=(0,j.useMemo)(()=>{let a=k?.username;return Array.isArray(a)?a[0]:a||""},[k]),[n,o]=(0,j.useState)(!0),[p,q]=(0,j.useState)(!1),[r,s]=(0,j.useState)(!0),[t,u]=(0,j.useState)(null),[v,w]=(0,j.useState)([]),[x,y]=(0,j.useState)(null),[z,A]=(0,j.useState)([]),[B,C]=(0,j.useState)(!1),[D,E]=(0,j.useState)(!1),[F,G]=(0,j.useState)(null),[H,I]=(0,j.useState)(!1),[J,K]=(0,j.useState)("conversations"),[L,M]=(0,j.useState)({x:0,y:0}),[N,O]=(0,j.useState)({width:1920,height:1080}),[P,Q]=(0,j.useState)(!1),R=(0,j.useRef)({x:0,y:0}),S=(0,j.useRef)(null),T=(0,j.useRef)(null),U=(0,j.useRef)(null),V=(0,j.useRef)(null),W=(0,g.useToast)();(0,j.useEffect)(()=>{Q(!0);let a=()=>{O({width:window.innerWidth,height:window.innerHeight})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,j.useEffect)(()=>{let a=a=>{R.current={x:a.clientX,y:a.clientY},null===S.current&&(S.current=requestAnimationFrame(()=>{M(R.current),S.current=null}))};return window.addEventListener("mousemove",a,{passive:!0}),()=>{window.removeEventListener("mousemove",a),null!==S.current&&cancelAnimationFrame(S.current)}},[]),(0,j.useEffect)(()=>{a.push("/sign-in")},[a,m]);let X=(0,j.useCallback)(async()=>{o(!0);try{let a=i.UsersService.getUserSession();if(!a?.user?.username)throw Error("User session not found");let b=await l.findAllConversations(a.user.username);w(Array.isArray(b)?b:[])}catch(a){W.error("Failed to load conversations. Please try again."),console.error("Error fetching conversations:",a),w([])}finally{o(!1)}},[W]),Y=(0,j.useCallback)(async a=>{C(!0);try{let b=i.UsersService.getUserSession();if(!b?.user?.username)throw Error("User session not found");let c=await l.findMessagesByConversation(b.user.username,a),d=Array.isArray(c)?c:[];return A(d),d}catch(a){return W.error("Failed to load messages. Please try again."),console.error("Error fetching messages:",a),A([]),[]}finally{C(!1)}},[W]),Z=(0,j.useCallback)(async(a,b)=>{if(!D&&0!==b.length){E(!0);try{let c=i.UsersService.getUserSession();if(!c?.user?.username)throw Error("User session not found");await l.markMessagesAsRead(c.user.username,a,{messageIds:b}),A(a=>a.map(a=>b.includes(a.id)?{...a,readAt:a.readAt||new Date().toISOString()}:a));let d=await l.findAllConversations(c.user.username),e=Array.isArray(d)?d:[];w(e);let f=e.find(b=>b.id===a);f&&y(f)}catch(a){W.error("Failed to mark messages as read."),console.error("Error marking messages as read:",a)}finally{E(!1)}}},[W,D]);(0,j.useEffect)(()=>{p&&X()},[p,X]),(0,j.useEffect)(()=>{z.length>0&&!B&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{U.current&&(U.current.scrollTop=U.current.scrollHeight),V.current&&(V.current.scrollTop=V.current.scrollHeight)})})},[z,B,x]),(0,j.useEffect)(()=>{if(H){let a=setTimeout(()=>{I(!1),setTimeout(()=>{G(null)},500)},3e3);return()=>clearTimeout(a)}},[H]);let $=(0,j.useCallback)(async a=>{y(a);let b=await Y(a.id),c=b.findIndex(a=>!a.readAt);c>0&&-1!==c?(G(c),I(!0)):(G(null),I(!1));let d=b.filter(a=>!a.readAt).map(a=>a.id);d.length>0&&await Z(a.id,d),N.width<768&&K("messages")},[Y,Z,N.width]),_=(0,j.useCallback)(()=>{K("conversations"),y(null),A([]),G(null),I(!1)},[]),aa=(0,j.useCallback)(a=>{if(!a)return"";let b="string"==typeof a?new Date(a):a;if(isNaN(b.getTime()))return"";let c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=new Date(b.getFullYear(),b.getMonth(),b.getDate()),f=new Date(d);return(f.setDate(f.getDate()-1),e.getTime()===d.getTime())?b.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):e.getTime()===f.getTime()?"Yesterday":b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:b.getFullYear()!==c.getFullYear()?"numeric":void 0})},[]),ab=(0,j.useCallback)(a=>{if(!a)return"";let b="string"==typeof a?new Date(a):a;return isNaN(b.getTime())?"":b.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},[]),ac=(0,j.useCallback)(a=>{let b=a.trim().split(" ");return b.length>=2?(b[0][0]+b[b.length-1][0]).toUpperCase():a.substring(0,2).toUpperCase()},[]),ad=(0,j.useCallback)(()=>{localStorage.removeItem("user"),localStorage.removeItem("accessToken"),a.push("/")},[a]);return r||!p?(0,b.jsxs)("div",{className:"min-h-screen flex flex-col bg-background overflow-hidden relative",children:[(0,b.jsx)("div",{className:"hidden md:block",children:(0,b.jsx)(j.Suspense,{fallback:null,children:(0,b.jsx)(h.default,{mouse:L,windowSize:N})})}),(0,b.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:[(0,b.jsx)("div",{className:"absolute w-48 h-48 sm:w-64 sm:h-64 md:w-96 md:h-96 bg-jcoder-cyan/20 rounded-full blur-3xl animate-pulse",style:{left:`${L.x/20}px`,top:`${L.y/20}px`,transition:"all 0.3s ease-out"}}),(0,b.jsx)("div",{className:"absolute w-48 h-48 sm:w-64 sm:h-64 md:w-96 md:h-96 bg-jcoder-blue/20 rounded-full blur-3xl animate-pulse delay-1000",style:{right:`${L.x/25}px`,bottom:`${L.y/25}px`,transition:"all 0.3s ease-out"}}),(0,b.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:16px_16px] md:bg-[size:24px_24px]"})]}),(0,b.jsx)(e.default,{isAdmin:!0,onLogout:ad}),(0,b.jsx)("main",{className:"flex-1 container mx-auto px-4 sm:px-6 lg:px-8 pt-16 sm:pt-24 pb-6 sm:pb-12 relative z-10",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsx)("div",{className:"h-8 sm:h-10 w-48 sm:w-64 bg-jcoder-secondary rounded-lg mb-2 animate-pulse"}),(0,b.jsx)("div",{className:"h-3 sm:h-4 w-64 sm:w-96 bg-jcoder-secondary rounded-lg animate-pulse"})]})}),(0,b.jsx)(d.default,{user:t,username:m||t?.username})]}):(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 min-h-screen flex flex-col bg-background overflow-hidden relative",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 hidden md:block",children:(0,b.jsx)(j.Suspense,{fallback:null,children:(0,b.jsx)(h.default,{mouse:L,windowSize:N})})}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 fixed inset-0 overflow-hidden pointer-events-none z-0",children:[(0,b.jsx)("div",{style:{left:`${L.x/20}px`,top:`${L.y/20}px`,transition:"all 0.3s ease-out"},className:"jsx-9aeffe8ff0b86c65 absolute w-48 h-48 sm:w-64 sm:h-64 md:w-96 md:h-96 bg-jcoder-cyan/20 rounded-full blur-3xl animate-pulse"}),(0,b.jsx)("div",{style:{right:`${L.x/25}px`,bottom:`${L.y/25}px`,transition:"all 0.3s ease-out"},className:"jsx-9aeffe8ff0b86c65 absolute w-48 h-48 sm:w-64 sm:h-64 md:w-96 md:h-96 bg-jcoder-blue/20 rounded-full blur-3xl animate-pulse delay-1000"}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:16px_16px] md:bg-[size:24px_24px]"})]}),(0,b.jsx)(e.default,{isAdmin:!0,onLogout:ad}),(0,b.jsx)("main",{className:"jsx-9aeffe8ff0b86c65 flex-1 container mx-auto px-4 sm:px-6 lg:px-8 pt-16 sm:pt-24 pb-6 sm:pb-12 relative z-10",children:(0,b.jsxs)("div",{className:`jsx-9aeffe8ff0b86c65 max-w-7xl mx-auto transition-all duration-1000 h-full md:h-auto ${P?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[(0,b.jsx)("nav",{className:"jsx-9aeffe8ff0b86c65 mb-4 px-4 mt-4 md:mt-0",children:(0,b.jsxs)("ol",{className:"jsx-9aeffe8ff0b86c65 flex items-center gap-2 text-sm text-jcoder-muted",children:[(0,b.jsx)("li",{className:"jsx-9aeffe8ff0b86c65",children:(0,b.jsx)("button",{onClick:()=>a.push(`/${m}/admin`),className:"jsx-9aeffe8ff0b86c65 hover:text-jcoder-primary transition-colors group cursor-pointer",children:(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 group-hover:underline",children:"Dashboard"})})}),(0,b.jsx)("li",{className:"jsx-9aeffe8ff0b86c65",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9aeffe8ff0b86c65 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-9aeffe8ff0b86c65"})})}),(0,b.jsx)("li",{className:"jsx-9aeffe8ff0b86c65 text-jcoder-foreground font-medium",children:"Messages"})]})}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 mb-2 sm:mb-4 md:mb-6 px-4",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center gap-3",children:(0,b.jsx)("h1",{className:"jsx-9aeffe8ff0b86c65 text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-jcoder-foreground",children:"Messages"})}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-xs sm:text-sm md:text-base text-jcoder-muted mt-1 sm:mt-2",children:"Manage and view messages from your portfolio visitors"})]}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 bg-jcoder-card border border-jcoder rounded-xl sm:rounded-2xl overflow-hidden shadow-xl shadow-jcoder-primary/10 h-[calc(100vh-12rem)] md:h-[calc(100vh-36rem)] flex flex-col px-2 md:px-0",children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 hidden md:flex flex-1 overflow-hidden",children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 w-80 border-r border-jcoder flex flex-col bg-jcoder-card",children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 p-4 border-b border-jcoder bg-jcoder-card",children:[(0,b.jsx)("h2",{className:"jsx-9aeffe8ff0b86c65 text-lg font-semibold text-jcoder-foreground",children:"Conversations"}),(0,b.jsxs)("p",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted mt-1",children:[v.length," ",1===v.length?"conversation":"conversations"]})]}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1 overflow-y-auto",children:n?(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 p-4 space-y-3",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center gap-3 p-3 bg-jcoder-secondary rounded-lg animate-pulse",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-12 h-12 rounded-full bg-jcoder-secondary"}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-4 w-24 bg-jcoder-secondary rounded mb-2"}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-3 w-full bg-jcoder-secondary rounded"})]})]},a))}):0===v.length?(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 p-8 text-center",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9aeffe8ff0b86c65 w-16 h-16 mx-auto text-jcoder-muted/50 mb-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",className:"jsx-9aeffe8ff0b86c65"})}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-jcoder-muted",children:"No conversations yet"}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-sm text-jcoder-muted/70 mt-1",children:"Messages from your portfolio will appear here"})]}):(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 divide-y divide-jcoder/50",children:v.map(a=>(0,b.jsx)("button",{onClick:()=>$(a),className:`jsx-9aeffe8ff0b86c65 w-full p-4 text-left hover:bg-jcoder-secondary transition-colors cursor-pointer ${x?.id===a.id?"bg-jcoder-secondary border-l-4 border-jcoder-primary":""}`,children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-start gap-3",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex-shrink-0 w-12 h-12 rounded-full bg-jcoder-gradient flex items-center justify-center text-black font-semibold text-sm",children:ac(a.senderName)}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-between mb-1",children:[(0,b.jsx)("h3",{className:"jsx-9aeffe8ff0b86c65 font-semibold text-sm text-jcoder-foreground truncate",children:a.senderName}),a.lastMessageAt&&(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted flex-shrink-0 ml-2",children:aa(a.lastMessageAt)})]}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted truncate flex-1",children:a.lastMessagePreview||"No messages"}),a.unreadCount>0&&(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 flex-shrink-0 min-w-[20px] h-5 px-1.5 rounded-full bg-jcoder-blue text-white text-[10px] font-bold flex items-center justify-center shadow-lg shadow-jcoder-blue/50",children:a.unreadCount>9?"9+":a.unreadCount})]})]})]})},a.id))})})]}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1 flex flex-col bg-jcoder-card",children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 p-4 border-b border-jcoder bg-jcoder-card flex items-center gap-3",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-10 h-10 rounded-full bg-jcoder-gradient flex items-center justify-center text-black font-semibold text-sm",children:ac(x.senderName)}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1",children:[(0,b.jsx)("h3",{className:"jsx-9aeffe8ff0b86c65 font-semibold text-jcoder-foreground",children:x.senderName}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted",children:x.senderEmail})]})]}),(0,b.jsxs)("div",{ref:U,className:"jsx-9aeffe8ff0b86c65 flex-1 overflow-y-auto p-4 space-y-4",children:[B?(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 space-y-3",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex justify-start",children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 max-w-xs lg:max-w-md bg-jcoder-secondary rounded-2xl p-3 animate-pulse",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-4 w-full bg-jcoder-card rounded mb-2"}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-4 w-3/4 bg-jcoder-card rounded"})]})},a))}):0===z.length?(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 text-center py-12",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9aeffe8ff0b86c65 w-16 h-16 mx-auto text-jcoder-muted/30 mb-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",className:"jsx-9aeffe8ff0b86c65"})}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-jcoder-muted",children:"No messages in this conversation"})]}):(0,b.jsx)(b.Fragment,{children:z.map((a,c)=>{let d=!!a.readAt,e=c>0?z[c-1]:null,f=!e||(()=>{let b=new Date(a.createdAt),c=new Date(e.createdAt);return b.toDateString()!==c.toDateString()})();return(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65",children:[f&&(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-center my-4",children:(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 px-3 py-1 bg-jcoder-secondary/50 rounded-full",children:(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted font-medium",children:(()=>{let b="string"==typeof a.createdAt?new Date(a.createdAt):a.createdAt,c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=new Date(b.getFullYear(),b.getMonth(),b.getDate()),f=new Date(d);return(f.setDate(f.getDate()-1),e.getTime()===d.getTime())?"Today":e.getTime()===f.getTime()?"Yesterday":b.toLocaleDateString("en-US",{month:"long",day:"numeric",year:b.getFullYear()!==c.getFullYear()?"numeric":void 0})})()})})}),null!==F&&c===F&&(0,b.jsx)("div",{className:`jsx-9aeffe8ff0b86c65 flex items-center justify-center my-4 transition-opacity duration-500 ${H?"opacity-100":"opacity-0"}`,children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center gap-2 px-4 py-1.5 bg-jcoder-blue/20 border border-jcoder-blue/40 rounded-full backdrop-blur-sm",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-1.5 h-1.5 rounded-full bg-jcoder-blue animate-pulse"}),(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-blue font-semibold",children:"Novas mensagens"}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-1.5 h-1.5 rounded-full bg-jcoder-blue animate-pulse"})]})}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex justify-start",children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 max-w-xs lg:max-w-md bg-jcoder-secondary rounded-2xl p-3 relative border border-jcoder",children:[(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-sm text-jcoder-foreground whitespace-pre-wrap break-words",children:a.message}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-end gap-2 mt-2",children:[(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted",children:ab(a.createdAt)}),d&&(0,b.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-9aeffe8ff0b86c65 w-4 h-4 text-blue-500",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd",className:"jsx-9aeffe8ff0b86c65"})})]})]})})]},a.id)})}),(0,b.jsx)("div",{ref:T,className:"jsx-9aeffe8ff0b86c65"})]})]}):(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 text-center",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9aeffe8ff0b86c65 w-24 h-24 mx-auto text-jcoder-muted/30 mb-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",className:"jsx-9aeffe8ff0b86c65"})}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-jcoder-muted text-lg font-medium",children:"Select a conversation"}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-sm text-jcoder-muted/70 mt-1",children:"Choose a conversation from the list to view messages"})]})})})]}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 md:hidden flex-1 flex flex-col overflow-hidden",children:"conversations"===J?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 p-4 border-b border-jcoder bg-jcoder-card",children:[(0,b.jsx)("h2",{className:"jsx-9aeffe8ff0b86c65 text-lg font-semibold text-jcoder-foreground",children:"Conversations"}),(0,b.jsxs)("p",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted mt-1",children:[v.length," ",1===v.length?"conversation":"conversations"]})]}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1 overflow-y-auto",children:n?(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 p-4 space-y-3",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center gap-3 p-3 bg-jcoder-secondary rounded-lg animate-pulse",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-12 h-12 rounded-full bg-jcoder-secondary"}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-4 w-24 bg-jcoder-secondary rounded mb-2"}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-3 w-full bg-jcoder-secondary rounded"})]})]},a))}):0===v.length?(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 p-8 text-center",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9aeffe8ff0b86c65 w-16 h-16 mx-auto text-jcoder-muted/50 mb-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",className:"jsx-9aeffe8ff0b86c65"})}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-jcoder-muted",children:"No conversations yet"}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-sm text-jcoder-muted/70 mt-1",children:"Messages from your portfolio will appear here"})]}):(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 divide-y divide-jcoder/50",children:v.map(a=>(0,b.jsx)("button",{onClick:()=>$(a),className:"jsx-9aeffe8ff0b86c65 w-full p-4 text-left hover:bg-jcoder-secondary transition-colors cursor-pointer",children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-start gap-3",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex-shrink-0 w-12 h-12 rounded-full bg-jcoder-gradient flex items-center justify-center text-black font-semibold text-sm",children:ac(a.senderName)}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-between mb-1",children:[(0,b.jsx)("h3",{className:"jsx-9aeffe8ff0b86c65 font-semibold text-sm text-jcoder-foreground truncate",children:a.senderName}),a.lastMessageAt&&(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted flex-shrink-0 ml-2",children:aa(a.lastMessageAt)})]}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted truncate flex-1",children:a.lastMessagePreview||"No messages"}),a.unreadCount>0&&(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 flex-shrink-0 min-w-[20px] h-5 px-1.5 rounded-full bg-jcoder-blue text-white text-[10px] font-bold flex items-center justify-center shadow-lg shadow-jcoder-blue/50",children:a.unreadCount>9?"9+":a.unreadCount})]})]})]})},a.id))})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 p-4 border-b border-jcoder bg-jcoder-card flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:_,className:"jsx-9aeffe8ff0b86c65 p-2 hover:bg-jcoder-secondary rounded-lg transition-colors",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9aeffe8ff0b86c65 w-5 h-5 text-jcoder-foreground",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-9aeffe8ff0b86c65"})})}),x&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-10 h-10 rounded-full bg-jcoder-gradient flex items-center justify-center text-black font-semibold text-sm",children:ac(x.senderName)}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex-1",children:[(0,b.jsx)("h3",{className:"jsx-9aeffe8ff0b86c65 font-semibold text-jcoder-foreground",children:x.senderName}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted",children:x.senderEmail})]})]})]}),(0,b.jsxs)("div",{ref:V,className:"jsx-9aeffe8ff0b86c65 flex-1 overflow-y-auto p-4 space-y-4",children:[B?(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 space-y-3",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex justify-start",children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 max-w-xs bg-jcoder-secondary rounded-2xl p-3 animate-pulse",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-4 w-full bg-jcoder-card rounded mb-2"}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 h-4 w-3/4 bg-jcoder-card rounded"})]})},a))}):0===z.length?(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 text-center py-12",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9aeffe8ff0b86c65 w-16 h-16 mx-auto text-jcoder-muted/30 mb-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",className:"jsx-9aeffe8ff0b86c65"})}),(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-jcoder-muted",children:"No messages in this conversation"})]}):(0,b.jsx)(b.Fragment,{children:z.map((a,c)=>{let d=!!a.readAt,e=c>0?z[c-1]:null,f=!e||(()=>{let b=new Date(a.createdAt),c=new Date(e.createdAt);return b.toDateString()!==c.toDateString()})();return(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65",children:[f&&(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-center my-4",children:(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 px-3 py-1 bg-jcoder-secondary/50 rounded-full",children:(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted font-medium",children:(()=>{let b="string"==typeof a.createdAt?new Date(a.createdAt):a.createdAt,c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=new Date(b.getFullYear(),b.getMonth(),b.getDate()),f=new Date(d);return(f.setDate(f.getDate()-1),e.getTime()===d.getTime())?"Today":e.getTime()===f.getTime()?"Yesterday":b.toLocaleDateString("en-US",{month:"long",day:"numeric",year:b.getFullYear()!==c.getFullYear()?"numeric":void 0})})()})})}),null!==F&&c===F&&(0,b.jsx)("div",{className:`jsx-9aeffe8ff0b86c65 flex items-center justify-center my-4 transition-opacity duration-500 ${H?"opacity-100":"opacity-0"}`,children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center gap-2 px-4 py-1.5 bg-jcoder-blue/20 border border-jcoder-blue/40 rounded-full backdrop-blur-sm",children:[(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-1.5 h-1.5 rounded-full bg-jcoder-blue animate-pulse"}),(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-blue font-semibold",children:"Novas mensagens"}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 w-1.5 h-1.5 rounded-full bg-jcoder-blue animate-pulse"})]})}),(0,b.jsx)("div",{className:"jsx-9aeffe8ff0b86c65 flex justify-start",children:(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 max-w-[85%] bg-jcoder-secondary rounded-2xl p-3 relative border border-jcoder",children:[(0,b.jsx)("p",{className:"jsx-9aeffe8ff0b86c65 text-sm text-jcoder-foreground whitespace-pre-wrap break-words",children:a.message}),(0,b.jsxs)("div",{className:"jsx-9aeffe8ff0b86c65 flex items-center justify-end gap-2 mt-2",children:[(0,b.jsx)("span",{className:"jsx-9aeffe8ff0b86c65 text-xs text-jcoder-muted",children:ab(a.createdAt)}),d&&(0,b.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-9aeffe8ff0b86c65 w-4 h-4 text-blue-500",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd",className:"jsx-9aeffe8ff0b86c65"})})]})]})})]},a.id)})}),(0,b.jsx)("div",{ref:T,className:"jsx-9aeffe8ff0b86c65"})]})]})})]})]})}),(0,b.jsx)(d.default,{user:t,username:m||t?.username}),(0,b.jsx)(c.default,{id:"9aeffe8ff0b86c65",children:".delay-1000.jsx-9aeffe8ff0b86c65{animation-delay:1s}"})]})}}];

//# sourceMappingURL=app_%5Busername%5D_admin_messages_page_tsx_71b1e7e6._.js.map